FROM node:12
LABEL maintainer="Brian H Wilson brian@wildsong.biz"

USER node
WORKDIR /home/node

ARG snapshot
ADD --chown=node ${snapshot} .
RUN unzip ${snapshot} && \
    rm ${snapshot}

WORKDIR /home/node/ArcGISExperienceBuilder/server/
RUN mkdir -p src/public
#VOLUME /home/node/server/src/public

RUN npm ci && npm audit fix


